var conversion_data={1270:{inflation:532.72,horse_price:.76,cow_price:.35,wool_price:.13,wheat_price:.16,wage_price:.01,century:"13th"},1280:{inflation:506.62,horse_price:.85,cow_price:.45,wool_price:.23,wheat_price:.26,wage_price:.01,century:"13th"},1290:{inflation:536.83,horse_price:.85,cow_price:.45,wool_price:.23,wheat_price:.26,wage_price:.01,century:"13th"},1300:{inflation:517.54,horse_price:.85,cow_price:.45,wool_price:.23,wheat_price:.26,wage_price:.01,century:"14th"},1310:{inflation:446.49,horse_price:.85,cow_price:.45,wool_price:.23,wheat_price:.26,wage_price:.01,century:"14th"},1320:{inflation:335.83,horse_price:.85,cow_price:.45,wool_price:.23,wheat_price:.26,wage_price:.01,century:"14th"},1330:{inflation:447.68,horse_price:.69,cow_price:.37,wool_price:.14,wheat_price:.37,wage_price:.02,century:"14th"},1340:{inflation:546.73,horse_price:.69,cow_price:.37,wool_price:.14,wheat_price:.37,wage_price:.02,century:"14th"},1350:{inflation:428.64,horse_price:.69,cow_price:.37,wool_price:.14,wheat_price:.37,wage_price:.02,century:"14th"},1360:{inflation:363.44,horse_price:.69,cow_price:.37,wool_price:.14,wheat_price:.37,wage_price:.02,century:"14th"},1370:{inflation:358.01,horse_price:.69,cow_price:.37,wool_price:.14,wheat_price:.37,wage_price:.02,century:"14th"},1380:{inflation:450.48,horse_price:1.27,cow_price:.58,wool_price:.18,wheat_price:.31,wage_price:.02,century:"14th"},1390:{inflation:483.3,horse_price:1.27,cow_price:.58,wool_price:.18,wheat_price:.31,wage_price:.02,century:"14th"},1400:{inflation:447.28,horse_price:1.27,cow_price:.58,wool_price:.18,wheat_price:.31,wage_price:.02,century:"15th"},1410:{inflation:459.93,horse_price:1.27,cow_price:.58,wool_price:.18,wheat_price:.31,wage_price:.02,century:"15th"},1420:{inflation:469.35,horse_price:1.27,cow_price:.58,wool_price:.18,wheat_price:.31,wage_price:.02,century:"15th"},1430:{inflation:455.77,horse_price:.76,cow_price:.4,wool_price:.14,wheat_price:.37,wage_price:.03,century:"15th"},1440:{inflation:469.35,horse_price:.76,cow_price:.4,wool_price:.14,wheat_price:.37,wage_price:.03,century:"15th"},1450:{inflation:455.77,horse_price:.76,cow_price:.4,wool_price:.14,wheat_price:.37,wage_price:.03,century:"15th"},1460:{inflation:469.35,horse_price:.76,cow_price:.4,wool_price:.14,wheat_price:.37,wage_price:.03,century:"15th"},1470:{inflation:500.58,horse_price:.76,cow_price:.4,wool_price:.14,wheat_price:.37,wage_price:.03,century:"15th"},1480:{inflation:504.59,horse_price:1.41,cow_price:.38,wool_price:.11,wheat_price:.4,wage_price:.03,century:"15th"},1490:{inflation:488.93,horse_price:1.41,cow_price:.38,wool_price:.11,wheat_price:.4,wage_price:.03,century:"15th"},1500:{inflation:486.1,horse_price:1.41,cow_price:.38,wool_price:.11,wheat_price:.4,wage_price:.03,century:"16th"},1510:{inflation:483.77,horse_price:1.41,cow_price:.38,wool_price:.11,wheat_price:.4,wage_price:.03,century:"16th"},1520:{inflation:379.58,horse_price:1.41,cow_price:.38,wool_price:.11,wheat_price:.4,wage_price:.03,century:"16th"},1530:{inflation:322.1,horse_price:4.75,cow_price:1.25,wool_price:.32,wheat_price:.93,wage_price:.03,century:"16th"},1540:{inflation:307.56,horse_price:4.75,cow_price:1.25,wool_price:.32,wheat_price:.93,wage_price:.03,century:"16th"},1550:{inflation:200.51,horse_price:4.75,cow_price:1.25,wool_price:.32,wheat_price:.93,wage_price:.03,century:"16th"},1560:{inflation:170.3,horse_price:4.75,cow_price:1.25,wool_price:.32,wheat_price:.93,wage_price:.03,century:"16th"},1570:{inflation:173.89,horse_price:4.75,cow_price:1.25,wool_price:.32,wheat_price:.93,wage_price:.03,century:"16th"},1580:{inflation:149.31,horse_price:8.24,cow_price:1.86,wool_price:.34,wheat_price:1.8,wage_price:.05,century:"16th"},1590:{inflation:125.29,horse_price:8.24,cow_price:1.86,wool_price:.34,wheat_price:1.8,wage_price:.05,century:"16th"},1600:{inflation:100.64,horse_price:8.24,cow_price:1.86,wool_price:.34,wheat_price:1.8,wage_price:.05,century:"17th"},1610:{inflation:97.88,horse_price:8.24,cow_price:1.86,wool_price:.34,wheat_price:1.8,wage_price:.05,century:"17th"},1620:{inflation:96,horse_price:8.24,cow_price:1.86,wool_price:.34,wheat_price:1.8,wage_price:.05,century:"17th"},1630:{inflation:89.16,horse_price:6.37,cow_price:5.39,wool_price:.8,wheat_price:3.83,wage_price:.07,century:"17th"},1640:{inflation:85.8,horse_price:6.37,cow_price:5.39,wool_price:.8,wheat_price:3.83,wage_price:.07,century:"17th"},1650:{inflation:75.56,horse_price:6.37,cow_price:5.39,wool_price:.8,wheat_price:3.83,wage_price:.07,century:"17th"},1660:{inflation:76.77,horse_price:6.37,cow_price:5.39,wool_price:.8,wheat_price:3.83,wage_price:.07,century:"17th"},1670:{inflation:83.05,horse_price:6.37,cow_price:5.39,wool_price:.8,wheat_price:3.83,wage_price:.07,century:"17th"},1680:{inflation:83.54,horse_price:5.38,cow_price:4.16,wool_price:.6,wheat_price:2,wage_price:.09,century:"17th"},1690:{inflation:87.47,horse_price:5.38,cow_price:4.16,wool_price:.6,wheat_price:2,wage_price:.09,century:"17th"},1700:{inflation:78.09,horse_price:5.38,cow_price:4.16,wool_price:.6,wheat_price:2,wage_price:.09,century:"18th"},1710:{inflation:76.59,horse_price:5.38,cow_price:4.16,wool_price:.6,wheat_price:2,wage_price:.09,century:"18th"},1720:{inflation:84.75,horse_price:5.38,cow_price:4.16,wool_price:.6,wheat_price:2,wage_price:.09,century:"18th"},1730:{inflation:85.98,horse_price:6.85,cow_price:4.67,wool_price:.47,wheat_price:1.63,wage_price:.1,century:"18th"},1740:{inflation:86.29,horse_price:6.85,cow_price:4.67,wool_price:.47,wheat_price:1.63,wage_price:.1,century:"18th"},1750:{inflation:85.16,horse_price:6.85,cow_price:4.67,wool_price:.47,wheat_price:1.63,wage_price:.1,century:"18th"},1760:{inflation:74.79,horse_price:6.85,cow_price:4.67,wool_price:.47,wheat_price:1.63,wage_price:.1,century:"18th"},1770:{inflation:63.69,horse_price:6.85,cow_price:4.67,wool_price:.47,wheat_price:1.63,wage_price:.1,century:"18th"},1780:{inflation:62.85,horse_price:10.5,cow_price:5,wool_price:.9,wheat_price:5.69,wage_price:.15,century:"18th"},1790:{inflation:56.03,horse_price:10.5,cow_price:5,wool_price:.9,wheat_price:5.69,wage_price:.15,century:"18th"},1800:{inflation:32.17,horse_price:10.5,cow_price:5,wool_price:.9,wheat_price:5.69,wage_price:.15,century:"19th"},1810:{inflation:33.96,horse_price:10.5,cow_price:5,wool_price:.9,wheat_price:5.69,wage_price:.15,century:"19th"},1820:{inflation:41.92,horse_price:10.5,cow_price:5,wool_price:.9,wheat_price:5.69,wage_price:.15,century:"19th"},1830:{inflation:49.49,horse_price:15,cow_price:5.34,wool_price:.66,wheat_price:2.01,wage_price:.2,century:"19th"},1840:{inflation:44.1,horse_price:15,cow_price:5.34,wool_price:.66,wheat_price:2.01,wage_price:.2,century:"19th"},1850:{inflation:58.53,horse_price:15,cow_price:5.34,wool_price:.66,wheat_price:2.01,wage_price:.2,century:"19th"},1860:{inflation:43.16,horse_price:15,cow_price:5.34,wool_price:.66,wheat_price:2.01,wage_price:.2,century:"19th"},1870:{inflation:45.7,horse_price:15,cow_price:5.34,wool_price:.66,wheat_price:2.01,wage_price:.2,century:"19th"},1880:{inflation:48.31,horse_price:27.5,cow_price:9.69,wool_price:.54,wheat_price:1.28,wage_price:.33,century:"19th"},1890:{inflation:59.89,horse_price:27.5,cow_price:9.69,wool_price:.54,wheat_price:1.28,wage_price:.33,century:"19th"},1900:{inflation:57.06,horse_price:27.5,cow_price:9.69,wool_price:.54,wheat_price:1.28,wage_price:.33,century:"20th"},1905:{inflation:57.35,horse_price:27.5,cow_price:9.69,wool_price:.54,wheat_price:1.28,wage_price:.33,century:"20th"},1910:{inflation:57.06,horse_price:27.5,cow_price:9.69,wool_price:.54,wheat_price:1.28,wage_price:.33,century:"20th"},1915:{inflation:43.06,horse_price:27.5,cow_price:9.69,wool_price:.54,wheat_price:1.28,wage_price:.33,century:"20th"},1920:{inflation:21.21,horse_price:27.5,cow_price:9.69,wool_price:.54,wheat_price:1.28,wage_price:.33,century:"20th"},1925:{inflation:29.97,horse_price:255.2,cow_price:67.17,wool_price:4.44,wheat_price:5.98,wage_price:.33,century:"20th"},1930:{inflation:33.42,horse_price:255.2,cow_price:67.17,wool_price:4.44,wheat_price:5.98,wage_price:.33,century:"20th"},1935:{inflation:36.98,horse_price:255.2,cow_price:67.17,wool_price:4.44,wheat_price:5.98,wage_price:1.42,century:"20th"},1940:{inflation:28.72,horse_price:255.2,cow_price:67.17,wool_price:4.44,wheat_price:5.98,wage_price:1.42,century:"20th"},1945:{inflation:25.95,horse_price:255.2,cow_price:67.17,wool_price:4.44,wheat_price:5.98,wage_price:1.42,century:"20th"},1950:{inflation:22.78,horse_price:255.2,cow_price:67.17,wool_price:4.44,wheat_price:5.98,wage_price:1.42,century:"20th"},1955:{inflation:17.42,horse_price:255.2,cow_price:67.17,wool_price:4.44,wheat_price:5.98,wage_price:1.42,century:"20th"},1960:{inflation:15.3,horse_price:255.2,cow_price:67.17,wool_price:4.44,wheat_price:5.98,wage_price:1.42,century:"20th"},1965:{inflation:12.86,horse_price:255.2,cow_price:67.17,wool_price:4.44,wheat_price:5.98,wage_price:1.42,century:"20th"},1970:{inflation:10.28,horse_price:255.2,cow_price:67.17,wool_price:4.44,wheat_price:5.98,wage_price:1.42,century:"20th"},1975:{inflation:5.57,horse_price:2387.37,cow_price:392.79,wool_price:5.36,wheat_price:17.36,wage_price:57.6,century:"20th"},1980:{inflation:2.85,horse_price:2387.37,cow_price:392.79,wool_price:5.36,wheat_price:17.36,wage_price:57.6,century:"20th"},1985:{inflation:2.01,horse_price:2387.37,cow_price:392.79,wool_price:5.36,wheat_price:17.36,wage_price:57.6,century:"20th"},1990:{inflation:1.51,horse_price:2387.37,cow_price:392.79,wool_price:5.36,wheat_price:17.36,wage_price:57.6,century:"20th"},1995:{inflation:1.28,horse_price:2387.37,cow_price:392.79,wool_price:5.36,wheat_price:17.36,wage_price:57.6,century:"20th"},2000:{inflation:1.12,horse_price:2387.37,cow_price:392.79,wool_price:5.36,wheat_price:17.36,wage_price:57.6,century:"21st"},2005:{inflation:1,horse_price:2387.37,cow_price:392.79,wool_price:5.36,wheat_price:17.36,wage_price:57.6,century:"21st"},2017:{inflation:1.37,horse_price:2387.37,cow_price:1200,wool_price:6.35,wage_price:100,wheat_price:1.88,century:"21st"}};function show_validation_error_div(){window.location.hash="currency-h2",$("#currency-error").show()}function hide_validation_error_div(){window.location.hash="",$("#currency-error").hide()}function show_inputs_relevant_to_selected_year(){get_currency("#currency-year")>1970?($(".newer-currencies").each(function(){$(this).show(),$(this).find("input").attr("required"),$(this).find("input").attr("aria-required");var e=$(this).find("input").attr("name");$(this).find("label").attr("for",e)}),$(".older-currencies").each(function(){$(this).hide(),$(this).find("input").length>0?($(this).find("input").removeAttr("required"),$(this).find("input").removeAttr("aria-required")):($(this).find("select").removeAttr("required"),$(this).find("select").removeAttr("aria-required")),$(this).find("label").removeAttr("for")})):get_currency("#currency-year")<=1970&&($(".newer-currencies").each(function(){$(this).hide(),$(this).find("input").removeAttr("required"),$(this).find("input").removeAttr("aria-required"),$(this).find("label").removeAttr("for")}),$(".older-currencies").each(function(){var e;$(this).show(),$(this).find("input").length>0?($(this).find("input").attr("required",!0),$(this).find("input").attr("aria-required",!0),e=$(this).find("input").attr("name"),$(this).find("label").attr("for",e)):($(this).find("select").attr("required",!0),$(this).find("select").attr("aria-required",!0),e=$(this).find("select").attr("name"),$(this).find("label").attr("for",e))}))}function change_fieldset_text(){isNaN(get_currency("#currency-year"))?($("#currency-legend").text("Enter currency to show its purchasing power"),$("#currency-submit").val("Show purchasing power")):($("#currency-legend").text("Enter currency to show its purchasing power in "+get_currency("#currency-year")),$("#currency-submit").val("Show purchasing power in "+get_currency("#currency-year")))}function build_century_intro_paragraph(e,r,i){return"<div id='currency-century-intro'><p>"+e+"</p><p id='currency-century-intro-read-more'><a href='"+i+"'>Read more about the "+r+" century. </a></p></div>"}function currency_output(){var e=get_user_inputs(),r=currency_formula(),i="",c=number_to_pounds_string(r.money,!0),t="",o="";"21st"!=e.century&&($.map(wp_child_theme.excerptArray,function(r,i){$.map(r,function(r,i){i==e.century&&(t=r)})}),$.map(wp_child_theme.urlArray,function(r,i){$.map(r,function(r,i){i==e.century&&(o=r)})}),i=build_century_intro_paragraph(t,e.century,o));var n=wp_child_theme.templateURL+"/img/",_="<div class='currency' id='currency-result'><h3 class='currency-result-header'>In 2017, this is worth approximately: </h3><span id='currency-large-text'>"+c+"</span><h3 class='currency-result-header'>In "+e.year+", you could buy one of the following with "+r.bp_string+": </h3>"+build_currency_output_html("Horses",r.horses,"",n+"horse.png")+build_currency_output_html("Cows",r.cows,"",n+"cow.png")+build_currency_output_html("Wool",r.wool,"stones",n+"ewe.png")+build_currency_output_html("Wheat",r.wheat,"quarters",n+"wheat.png")+build_currency_output_html("Wages",r.wage,"days (skilled tradesman)",n+"coinage.png")+i+"</div>";$("#currency-result").html(_),$("#currency-result").fadeIn()}function build_currency_output_html(e,r,i,c){return"<h4> <img src='"+c+"'/>"+e+": "+r+" "+i+"</h4>"}function hide_validation_messages(){hide_validation_error_div(),$(".form-error").remove(),$("input").removeClass("form-warning"),$("select").removeClass("form-warning")}function set_validation_message(e,r){show_validation_error_div(),$("#currency-"+r).addClass("form-warning"),$("#currency-"+r).after(function(){return"<span class='form-error form-hint'>"+e+"</span>"})}function check_validation(){hide_validation_messages();var e=get_currency("#currency-year"),r=get_currency("#currency-pounds"),i=get_currency("#currency-shillings"),c=get_currency("#currency-old-pence"),t=get_currency("#currency-new-pence"),o=!0;return isNaN(e)&&(set_validation_message("Select a year of currency.","year"),o=!1),e<=1900?e%10!=0&&(set_validation_message("Enter a year ending in 0. For example 1270.","year"),o=!1):e>1900&&e%5!=0&&2017!==e&&(set_validation_message("Enter a year ending in 5 or 0. For example 1975 or 1980.","year"),o=!1),e<1270&&(set_validation_message("Enter a year above 1270.","year"),o=!1),r<0&&(set_validation_message("Enter a valid number of pounds.","pounds"),o=!1),e<=1970&&((i<0||i>19)&&(set_validation_message("Enter a whole number between 0 and 19 into the shillings field. ","shillings"),o=!1),(c<0||c>11)&&(set_validation_message("Enter a whole between 0 and 11 into the pence field.","old-pence"),o=!1),0===r&&0===c&&0===i&&(set_validation_message("Enter a number above zero into at least one currency field.","pounds"),set_validation_message("Enter a number above zero into at least one currency field.","old-pence"),set_validation_message("Enter a number above zero into at least one currency field.","shillings"),o=!1)),e>1970&&((t<0||t>99)&&(set_validation_message("Enter a whole number between 0 and 99.","new-pence"),o=!1),0===r&&0===t&&(set_validation_message("Enter a number above zero into at least one currency field.","pounds"),set_validation_message("Enter a number above zero into at least one currency field.","new-pence"),o=!1)),o}function old_money_to_new_formula(e){var r;return(e=e||get_user_inputs()).year<=1970?r=(e.pounds+e.shillings/20+e.old_pence/240)*e.inflation:e.year>1970&&(r=2017!==e.year?(e.pounds+e.new_pence)*e.inflation:e.pounds+e.new_pence),2017!==e.year&&(r*=conversion_data[2017].inflation),r.toFixed(2)}function currency_formula(e){var r,i=old_money_to_new_formula(e=e||get_user_inputs()),c="";return e.year<1975?(r=e.pounds+e.shillings/20+e.old_pence/240,e.pounds>0&&(c=number_to_pounds_string(e.pounds,!1)),e.shillings>0&&(e.pounds>0&&(c+=", "),c=c+e.shillings+"s"),e.old_pence>0&&((e.pounds>0||e.shillings>0)&&(c+=" & "),c=c+e.old_pence+"d")):c=number_to_pounds_string(r=e.pounds+e.new_pence,!0),{horses:Math.floor(r/get_price(e.year,"horse_price")),cows:Math.floor(r/get_price(e.year,"cow_price")),wool:Math.floor(r/get_price(e.year,"wool_price")),wheat:Math.floor(r/get_price(e.year,"wheat_price")),wage:Math.floor(r/get_price(e.year,"wage_price")),money:i,bp_string:c}}function number_to_pounds_string(e,r){var i=e.toString().split("."),c=i[0],t=i[1]||"",o="";return o=c.length>3?c.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):c,1===t.length?t+="0":0===t.length&&(t="00"),r?"£"+o+"."+t:"£"+o}function get_price(e,r){return conversion_data[e][r]}function get_century(e){return e>=2e3?"21st":e>=1900?"20th":e>=1800?"19th":e>=1700?"18th":e>=1600?"17th":e>=1500?"16th":e>=1400?"15th":e>=1300?"14th":e>=1200?"13th":void 0}function get_currency(e){return"#currency-new-pence"===e?parseInt($(e).val(),10)/100:parseInt($(e).val(),10)}function get_user_inputs(){return{year:get_currency("#currency-year"),pounds:get_currency("#currency-pounds"),shillings:get_currency("#currency-shillings"),old_pence:get_currency("#currency-old-pence"),new_pence:get_currency("#currency-new-pence"),inflation:get_price(get_currency("#currency-year"),"inflation"),century:get_century(get_currency("#currency-year"))}}$(function(){show_inputs_relevant_to_selected_year(),change_fieldset_text(),$("#currency-form").on("submit",function(e){e.preventDefault(),check_validation()?(hide_validation_error_div(),"#currency-result"==window.location.hash&&(window.location.hash=""),window.location.hash="#currency-result",currency_output()):show_validation_error_div()}),$("#currency-year").on("change",function(){change_fieldset_text(),show_inputs_relevant_to_selected_year()})});